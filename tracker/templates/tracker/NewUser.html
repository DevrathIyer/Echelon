<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="google-signin-client_id" content="867858739826-0j8s1vplsccuqcha9tng77pmrpc49mam.apps.googleusercontent.com">
<div class="g-signin2" data-onsuccess="onSignUp"></div>
<a href="#" onclick="signOut();">Sign out</a>
<form id = "SignUpForm" action="{% url 'createnewuser' %}" method="post">
{% csrf_token %}
    <input type="hidden" id = "TokenID" name="TokenID" value="Not Logged In">
    <input type="hidden" id = "Email" name="Email" value="Not Logged In">
</form>
<script>
  function onSignUp(googleUser) {
    var profile = googleUser.getBasicProfile();
    var id_token = googleUser.getAuthResponse().id_token;
    document.getElementById("TokenUpID").value = id_token;
    document.getElementById("Email").value = profile.getEmail();
    document.getElementById("SignUpForm").submit();
}
</script>