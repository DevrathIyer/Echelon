<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Echelon</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
    <meta name="google-signin-client_id" content="867858739826-0j8s1vplsccuqcha9tng77pmrpc49mam.apps.googleusercontent.com">

</head>
<body>
<a href = "{% url 'credits' %}">Manage Credits</a>
<a onclick="signOut();">Sign out</a>
<form id = "SignOutForm" action="{% url 'signout' %}" method="post">
{% csrf_token %}
</form>
<script>
    function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
        console.log('User signed out.');
        document.getElementById("SignOutForm").submit();
        });
    }
    function onLoad() {
      gapi.load('auth2', function() {
        gapi.auth2.init();
      });
    }
</script>
{% for item in Projects %}
    <button id = "HIDEBUTTON{{item.Project_ID}}" value='hide/show'>{{item.Project_ID}}
    </button>
    <div id="DIV{{item.Project_ID}}">
        <div id="DIVLAYERCOUNT{{item.ProjectID}}">
            Layers: <input type="text" id="DIVLAYERCOUTNLABEL{{item.Project_ID}}" value={{item.Layers}} readonly="readonly" />
            <button id="Hello" onclick="openNav()" value='hide/show'>Edit</button>
            <div id="DIVLAYERCOUNTEDIT{{item.Project_ID}}" class="overlay">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                <div class="overlay-content">
                    <div class="LAYERCOUNTEDITHEADER">
                        Edit Layer Count
                    </div>
                    <div class="LAYERCOUNTEDITBODY">
                        Layers: <input type="text" id="DIVLAYERCOUNTEDITLABEL{{item.Project_ID}}" value={{item.Layers}} readonly="readonly" />
                        <button id="DIVLAYERCOUNTUP{{item.Project_ID}}" onclick="setQuantityDIVLAYERCOUNTEDITLABEL{{item.Project_ID}}('up');">+</button>
                        <button id="DIVLAYERCOUNTDOWN{{item.Project_ID}}" onclick="setQuantityDIVLAYERCOUNTEDITLABEL{{item.Project_ID}}('down');">-</button>
                    </div>
                    <div class="LAYERCOUNTEDITFOOTER">
                        <button id="DIVLAYERCOUNTCANCEL{{item.Project_ID}}" onclick="DIVLAYERCOUNTEDITCANCEL{{item.Project_ID}}()">Cancel</button>
                        <button id="DIVLAYERCOUNTSUBMIT{{item.Project_ID}}" onclick="DIVLAYERCOUNTEDITSUBMIT{{item.Project_ID}}()">Submit</button>
                    </div>
                </div>
            </div>
        </div>
        Neurons Per Layer:
            {% for x in item.Neurons_per_Layer %}
                <div id="DIVNEURONSPERLAYER{{forloop.counter}}{{item.Project_ID}}">
                    Layer {{forloop.counter}}: <input type="text" id="DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}" value={{x}} readonly="readonly" />Neurons
                    <button id="DIVNEURONLAYERUP{{forloop.counter}}{{item.Project_ID}}" onclick="setQuantityDIVNEURONLAYER{{forloop.counter}}{{item.Project_ID}}('up');">+</button>
                    <button id="DIVNEURONLAYERDOWN{{forloop.counter}}{{item.Project_ID}}" onclick="setQuantityDIVNEURONLAYER{{forloop.counter}}{{item.Project_ID}}('down');">-</button>
                    <script>
                        function setQuantityDIVNEURONLAYER{{forloop.counter}}{{item.Project_ID}}(upordown) {
                            var quantity = document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}");

                            if (DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}.value > 1) {
                                if (upordown == 'up')
                                {
                                    ++document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}").value;
                                }
                                else if (upordown == 'down')
                                {
                                    --document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}").value;
                                }
                            }
                            else if (quantity.value == 1)
                            {
                                if (upordown == 'up')
                                {
                                    ++document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}").value;
                                }
                            }
                            else
                            {
                                document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}").value=1;
                            }
                        }
                    </script>
                </div>
            {% endfor %}

            <script>
            jQuery(document).ready(function(){
                jQuery("#DIV{{item.Project_ID}}").toggle('show');
                jQuery("#HIDEBUTTON{{item.Project_ID}}").on('click', function(event) {
                    jQuery("#DIV{{item.Project_ID}}").toggle('show');
                    closeNav();
                });
            });

            function setQuantityDIVLAYERCOUNTEDITLABEL{{item.Project_ID}}(upordown) {
                var quantity = document.getElementById("DIVLAYERCOUNTEDITLABEL{{item.Project_ID}}");

                if (DIVLAYERCOUNTEDITLABEL{{item.Project_ID}}.value > 1) {
                    if (upordown == 'up')
                    {
                        ++document.getElementById("DIVLAYERCOUNTEDITLABEL{{item.Project_ID}}").value;
                    }
                    else if (upordown == 'down')
                    {
                        --document.getElementById("DIVLAYERCOUNTEDITLABEL{{item.Project_ID}}").value;
                    }
                }
                else if (quantity.value == 1)
                {
                    if (upordown == 'up')
                    {
                        ++document.getElementById("DIVLAYERCOUNTEDITLABEL{{item.Project_ID}}").value;
                    }
                }
                else
                {
                    document.getElementById("DIVLAYERCOUNTEDITLABEL{{item.Project_ID}}").value=1;
                }
            }
            function setQuantityDIVNEURONLAYER{{forloop.counter}}{{item.Project_ID}}(upordown) {
                var quantity = document.getElementById("DIVLAYERLABEL{{item.Project_ID}}");

                if (DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}.value > 1) {
                    if (upordown == 'up')
                    {
                        ++document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}").value;
                    }
                    else if (upordown == 'down')
                    {
                        --document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}").value;
                    }}
                    else if (quantity.value == 1)
                    {
                        if (upordown == 'up')
                        {
                            ++document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}").value;
                        }
                    }
                else
                {
                    document.getElementById("DIVNEURONLAYERLABEL{{forloop.counter}}{{item.Project_ID}}").value=1;
                }
            }
            function openNav()
            {
                document.getElementById("DIVLAYERCOUNTEDIT{{item.Project_ID}}").style.height = "100%";
            }

            function closeNav()
            {
                document.getElementById("DIVLAYERCOUNTEDIT{{item.Project_ID}}").style.height = "0%";
            }

            function DIVLAYERCOUNTEDITCANCEL{{item.Project_ID}}()
            {
                closeNav();
                origValue = document.getElementById('DIVLAYERCOUTNLABEL{{item.Project_ID}}').value;
                console.log(origValue);
                document.getElementById("DIVLAYERCOUNTEDITLABEL{{item.Project_ID}}").value = origValue;
            }
        </script>
    </div>
{% endfor %}

<style>
body {
    margin: 0;
    font-family: 'Lato', sans-serif;
}

.overlay {
    height: 0%;
    width: 100%;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: rgb(0,0,0);
    background-color: rgba(0,0,0, 0.9);
    overflow-y: hidden;
    transition: 0.5s;
}

.overlay-content {
    position: relative;
    top: 25%;
    width: 100%;
    text-align: center;
    margin-top: 30px;
}

.overlay a {
    padding: 8px;
    text-decoration: none;
    font-size: 36px;
    color: #818181;
    display: block;
    transition: 0.3s;
}

.overlay a:hover, .overlay a:focus {
    color: #f1f1f1;
}

.overlay .closebtn {
    position: absolute;
    top: 20px;
    right: 45px;
    font-size: 60px;
}

@media screen and (max-height: 450px) {
  .overlay {overflow-y: auto;}
  .overlay a {font-size: 20px}
  .overlay .closebtn {
    font-size: 40px;
    top: 15px;
    right: 35px;
  }
}
</style>
{% load static %}
    <!-- Bootstrap core CSS -->
    <link href="{% static 'tracker/css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Animate -->
    <link href="{% static 'tracker/css/animate.css' %}" rel="stylesheet">

    <!-- Magnific-popup -->
    <link rel="stylesheet" href="{% static 'tracker/css/magnific-popup.css' %}">

    <!-- Icon-font -->
    <link rel="stylesheet" type="text/css" href="{% static 'tracker/css/ionicons.min.css' %}">

    <!-- Custom styles for this template -->
    <link href="{% static 'tracker/css/style.css' %}" rel="stylesheet">
</body>
</html>